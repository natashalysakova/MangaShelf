@implements IDisposable

@inject NavigationManager NavigationManager
@inject IUiLocalizationService Localizer


<MudContainer MaxWidth="MaxWidth.Large" Class="d-flex align-center px-0 my-0">

    <MudIcon Icon="@Icons.Custom.Brands.MudBlazor" Color="Color.Secondary" Size="Size.Large" />
    <MudText Typo="Typo.h5" Class="mx-4">@Localizer["MangaShelf"]</MudText>

    <MudSpacer />
    <MudButton Href="/"
               StartIcon="@Icons.Material.Outlined.Home"
               Variant="Variant.Text"
               Color="Color.Secondary">
        @Localizer["MyShelf"]
    </MudButton>

    <MudButton Href="/catalog"
               StartIcon="@Icons.Material.Outlined.ViewList"
               Variant="Variant.Text"
               Color="Color.Secondary">
        @Localizer["Catalog"]
    </MudButton>
    <MudSpacer />
    <CultureSelector />
</MudContainer>

@code {
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}

