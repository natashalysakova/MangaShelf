@using MangaShelf.DAL.Models
@using System.Security.Claims

<MudStack Row Spacing="2" AlignItems="AlignItems.Start" Justify="Justify.FlexStart">

    @{
        string date;
        if (ReadingHistory.FinishedAt != null)
        {
            date = ReadingHistory.FinishedAt.Value.ToString("dd.MM.yyyy");
        }
        else
        {
            date = ReadingHistory.StartedAt.ToString("dd.MM.yyyy");
        }
    }

    <MudText Typo="Typo.body2">@date</MudText>
    
    <MudSpacer />

    <MudText Typo="Typo.body1">@ReadingHistory.Rating </MudText> 
    <MudIcon Icon="@Icons.Material.Filled.Star"></MudIcon>
    @if (!string.IsNullOrEmpty(ReadingHistory.Review))
    {
        <MudIconButton Size="Size.Small" Variant="Variant.Text" OnClick="@(() => { _showReview = !_showReview; })" Color="@Color.Default" Icon="@Icons.Material.Filled.Reviews"></MudIconButton>
    }
</MudStack>
@if (_showReview)
{
    <MudText Typo="Typo.body1">@ReadingHistory.Review </MudText>
}

@code {
    [Parameter]
    public ReadingHistoryDto ReadingHistory { get; set; }

    private bool _showReview = false;
}