@using MangaShelf.DAL.Models
@using System.Security.Claims
@using System.Threading.Tasks

@inherits VolumeActionBase

@if (VolumeState.CurrentUserStatus != null && VolumeState.CurrentUserStatus.Ownerships.Any())
{
    <MudText>@Localizer["History"]</MudText>
    <MudStack AlignItems="AlignItems.Stretch" Justify="Justify.Center" Spacing="1">
        @foreach (var ownership in VolumeState.CurrentUserStatus.Ownerships.OrderByDescending(x => x.Date))
        {
            <MudStack AlignItems="AlignItems.Center" Row Spacing="1" Class="ownership-timeline-item" @onclick="() => OpenSetOwnershipDialog(ownership)">
                <MudText Typo="Typo.body2">@ownership.Date.ToString("dd.MM.yyyy")</MudText>
                <MudSpacer></MudSpacer>
                <MudText Typo="Typo.body2">@Localizer[ownership.Status]</MudText>
@*                 <MudIconButton OnClick="() => OpenSetOwnershipDialog(ownership)" Icon="@Icons.Material.Filled.Edit" Size="Size.Small"></MudIconButton>
 *@            </MudStack>
        }
    </MudStack>


}

@code {

    protected override void OnInitialized()
    {
        VolumeState.OnUserStatusChanged += StateHasChanged;
    }

}